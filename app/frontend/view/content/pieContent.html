<section id="content" ng-click="appCtrl.hideHeaderMenus()">

  <section id="left">
    <div class="empty-msg" ng-show="appCtrl.repositories.isEmpty">
      <span class="mega-octicon octicon-rocket"></span>
      {{ MSGS["Start adding or clonning some awesome things"] }}! <3
    </div>

    <nav>
      <ul>
        <li ng-show="appCtrl.repositories.github.length > 0">
          <div class="label">Github</div>
          <ul>
            <li ng-repeat="repository in appCtrl.repositories.github" ng-class="{ selected:repository.selected }"
              ng-click="appCtrl.showRepositoryInfo(repository)" ng-right-click="appCtrl.openRepositoryContextualMenu($event, repository)">
              <span class="octicon octicon-repo"></span> {{ repository.name }}
            </li>
          </ul>
        </li>
        <li ng-show="appCtrl.repositories.bitbucket.length > 0">
          <div class="label">Bitbucket</div>
          <ul>
            <li ng-repeat="repository in appCtrl.repositories.bitbucket" ng-class="{ selected:repository.selected }"
              ng-click="appCtrl.showRepositoryInfo(repository)" ng-right-click="appCtrl.openRepositoryContextualMenu($event, repository)">
              <i class="fa fa-bitbucket"></i> {{ repository.name }}
            </li>
          </ul>
        </li>
        <li ng-show="appCtrl.repositories.outhers.length > 0">
          <div class="label">Others</div>
          <ul>
            <li ng-repeat="repository in appCtrl.repositories.outhers" ng-class="{ selected:repository.selected }"
              ng-click="appCtrl.showRepositoryInfo(repository)" ng-right-click="appCtrl.openRepositoryContextualMenu($event, repository)">
              <i class="fa fa-git-square"></i> {{ repository.name }}
            </li>
          </ul>
        </li>
      </ul>
    </nav>

    <pie-dialog show="false">
      Are you sure to remove <strong>{{ repository }}</strong>?
      <footer>
        <button type="button">NO</button> <button type="button" class="featured">YES</button>
      </footer>
    </pie-dialog>
  </section>

  <section class="getting-start-message" ng-hide="appCtrl.repositoryHistory.length > 0">
    <span class="mega-octicon octicon-inbox"></span>
    {{ MSGS["Select a repository to start"] }}
  </section>

  <section id="center" ng-show="appCtrl.repositoryHistory.length > 0">

    <form name="commitForm" class="commit-block" ng-show="appCtrl.commitChanges.length > 0">
      <h3><span class="octicon octicon-diff"></span> {{ MSGS["Commit changes"] }}</h3>
      <div class="input-wraper">
        <input type="text" ng-model="commitMessage" placeholder="{{ MSGS['Type a message for your commit'] }}" required />
        <textarea ng-model="commitDescription"
          placeholder="{{ MSGS['Give a description to the commit. Tell more about your changes...'] }}"></textarea>
      </div>
      <button type="button" class="featured" ng-click="appCtrl.commitSelectedChanges(commitMessage, commitDescription)"><span class="octicon octicon-cloud-upload"></span> {{ MSGS.COMMIT }}</button>
    </form>

    <nav ng-class="{ mask:appCtrl.loadingHistory }" ng-scroll="appCtrl.loadMoreCommits($event)">
      <ul>
        <li class="commit-number">
          <div ng-show="appCtrl.commitNumber != 'counting' && appCtrl.commitNumber.length > 0">
            <span class="octicon octicon-git-commit"></span> {{ appCtrl.commitNumber | number:0}} commits
          </div>
          <div ng-show="appCtrl.commitNumber == 'counting'">
            {{ MSGS["Counting..."] }}
          </div>
        </li>
        <li ng-repeat="commit in appCtrl.repositoryHistory" ng-class="{ selected:commit.selected }" ng-click="appCtrl.showCommitChanges(commit, $index)">
          <div class="commit-message">{{ commit.message }}</div>
          <div class="commit-details"><span class="date">{{ commit.date }} by</span> {{ commit.user }} </div>
        </li>
      </ul>
    </nav>

  </section>

  <section id="right" ng-class="{ mask:appCtrl.loadingChanges }" ng-show="appCtrl.repositoryHistory.length > 0">

    <tabs>
      <pane pane-title="{{ MSGS.History }}" icon="octicon octicon-history">
        <header class="commit-message" ng-show="appCtrl.getCommitMessage()">
          <h2>{{ appCtrl.getCommitMessage() }}</h2>
          <p class="commit-body" ng-show="appCtrl.getCommitBody()">
            {{ appCtrl.getCommitBody() }}
          </p>

          <h4 ng-show="appCtrl.getCommitUser()">
            <span class="octicon octicon-person"></span> {{ appCtrl.getCommitUser() }}
          </h4>
          <h4 ng-show="appCtrl.getCommitHash()">
            <span class="octicon octicon-git-commit"></span> {{ appCtrl.getCommitHash() }}
          </h4>
        </header>

        <nav>
          <ul>

            <li ng-repeat="history in appCtrl.commitHistory">
              <header>
                <span ng-click="appCtrl.showFileDiff(history)" ng-class="{ 'octicon-triangle-right': !history.showCode, 'octicon-triangle-down': history.showCode}" class="octicon octicon-triangle-right"></span>
                {{ history.name.length > 50 ? '...' : ''}} {{ history.name | limitTo: - 50 }}
                <menuitem ng-bind-html="history.changes"></menuitem>
              </header>
              <code ng-show="history.showCode">
                {{ history.code }}
              </code>
            </li>

          </ul>
        </nav>
      </pane>

      <pane pane-title="{{ MSGS.Changes }}" icon="octicon octicon-radio-tower">

        <header class="commit-message">
          <h2>{{ MSGS['Unsyncronized Changes'] }}</h2>
        </header>

        <nav>
          <ul>

            <li ng-repeat="change in appCtrl.commitChanges" ng-right-click="appCtrl.openChangesContextualMenu($event, change, $index)">
              <header>
                <span ng-hide="change.type == 'DELETED'" ng-click="appCtrl.showFileDiff(change)" ng-class="{ 'octicon-triangle-right': !change.showCode, 'octicon-triangle-down': change.showCode}" class="octicon octicon-triangle-right"></span>
                <input id="change{{$index}}" type="checkbox" ng-model="change.checked" checked="true" />
                <label for="change{{$index}}"></label>
                {{ change.name.length > 50 ? '...' : ''}} {{ change.name | limitTo: - 50 }}
                <menuitem ng-class="appCtrl.getChangeTypeClass(change.type)">{{ MSGS[change.type] }}</menuitem>
              </header>
              <code ng-show="change.showCode">
                {{ change.code }}
              </code>
            </li>

          </ul>
        </nav>

      </div>
    </tabs>

  </section>

</section>
